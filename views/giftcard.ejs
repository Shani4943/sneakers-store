<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Gift Card</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <h1>Gift Card</h1>

    <nav>
        <ul>
            <li><a href="/users/store">Store</a></li>
            <li><a href="/users/cart">Cart</a></li>
            <li><a href="/users/wishlist">Wishlist</a></li>
            <li><a href="/users/giftcard">Buy Gift Card</a></li>  
            <li><a href="/users/contact">Contact Us</a></li>
            <li><a href="/users/terms">Regulations and Terms</a></li>
            <li><a href="/users/logout">Logout</a></li>
        </ul>
    </nav>

    <!-- Update form to include POST method and action URL -->
    <form method="POST" action="/users/giftcard/checkout">
        <div>
            <p>Your best friend is the BEST? Let them know it :)</p>
        </div>
        
        <div>
            <h3>First step: Choose how much you want to spend on them (we are sure they deserve a lot)</h3>
            <select name="amount" id="amount" required>
                <option value="">Select an amount</option> <!-- Ensure user selects an option -->
                <option value="30">30 USD</option>
                <option value="45">45 USD</option>
                <option value="60">60 USD</option>
                <option value="75">75 USD</option>
                <option value="90">90 USD</option>
                <option value="105">105 USD</option>
                <option value="120">120 USD</option>
                <option value="135">135 USD</option>
                <option value="150">150 USD</option>
            </select>
        </div>
        
        <div>
            <h3>Second step: Write them something sweet, maybe a joke that only the two of you can remember</h3>
            <textarea name="message" id="message" placeholder="Write your message here..." maxlength="200" required></textarea>
            <div>Character Count: <span id="charCount">0</span>/200</div>
        </div>
        
        <div>
            <h3>Your Name:</h3>
            <input type="text" name="yourName" id="yourName" placeholder="Your Name" required>
        </div>
        
        <div>
            <h3>Third step: Send it as a gift?...</h3>
            <button type="button" id="giftButton">Send as a Gift</button>
            <button type="button" id="selfButton">Send it to Me</button>
        </div>
        
        <div id="recipientEmailDiv" style="display:none;">
            <h3>Recipient Email Address:</h3>
            <input type="email" name="recipientEmail" id="recipientEmail" placeholder="Recipient's Email" required>
        </div>

        <div id="selfMessage" style="display:none;">
            <p>You will receive a link to the card and can either forward it to a friend via messenger or print out a postcard and give it to them in person.</p>
        </div>
    
        <div>
            <!-- Updated button type to submit -->
            <button type="submit">Checkout</button>
        </div>
    </form>
    
    <script>
        document.getElementById('giftButton').addEventListener('click', function() {
            document.getElementById('recipientEmailDiv').style.display = 'block';
            document.getElementById('selfMessage').style.display = 'none';
            document.getElementById('recipientEmail').required = true; // Make recipient email required
        });
        
        document.getElementById('selfButton').addEventListener('click', function() {
            document.getElementById('recipientEmailDiv').style.display = 'none';
            document.getElementById('selfMessage').style.display = 'block';
            document.getElementById('recipientEmail').required = false; // Remove required attribute
        });
        
        document.getElementById('message').addEventListener('input', function() {
            document.getElementById('charCount').textContent = this.value.length;
        });
    </script>
</body>
</html>
